syntax = "proto3";

package deopeia.identity;

import "google/protobuf/empty.proto";
import "google/protobuf/wrappers.proto";
import "types.proto";

option csharp_namespace = "Deopeia.Identity.Contracts";

// The role service definition.
service RoleService {
  // Retrieve a paginated list of roles.
  rpc ListRole (ListRoleRequest) returns (ListRoleResponse);

  // Retrieve a list of role options for selection purposes.
  rpc ListRoleOption (google.protobuf.Empty) returns (deopeia.common.ListOptionResponse);

  // Retrieve a role by their ID.
  rpc GetRole (GetRoleRequest) returns (GetRoleResponse);

  // Create a new role.
  rpc CreateRole (CreateRoleRequest) returns (google.protobuf.Empty);

  // Update an existing role.
  rpc UpdateRole (UpdateRoleRequest) returns (google.protobuf.Empty);

  // Delete a role by their ID.
  rpc DeleteRole (DeleteRoleRequest) returns (google.protobuf.Empty);
}

// The request message for listing roles.
message ListRoleRequest {
  int32 page_index = 1;
  int32 page_size = 2;
  google.protobuf.BoolValue is_enabled = 3;
}

// The response message containing the list of roles.
message ListRoleResponse {
  int32 page_index = 1;
  int32 page_size = 2;
  int32 page_count = 3;
  int32 total_count = 4;
  repeated Role items = 5;

  message Role {
    string code = 1;
    string name = 2;
    google.protobuf.StringValue description = 3;
    bool is_enabled = 4;
  }
}

// The request message for role-related operations, containing relevant role information.
message GetRoleRequest {
  string code = 1;
}

// The response message containing the role information.
message GetRoleResponse {
  string code = 1;
  bool is_enabled = 2;
  repeated RoleLocalization localizations = 3;
  repeated string permission_codes = 4;
}

// The localization information for a role.
message RoleLocalization {
  string culture = 1;
  string name = 2;
  google.protobuf.StringValue description = 3;
}

// The request message for creating a new role.
message CreateRoleRequest {
  string code = 1;
  bool is_enabled = 2;
  repeated RoleLocalization localizations = 3;
  repeated string permission_codes = 4;
}

// The request message for updating an existing role.
message UpdateRoleRequest {
  string code = 1;
  bool is_enabled = 2;
  repeated RoleLocalization localizations = 3;
  repeated string permission_codes = 4;
}

// The request message for deleting a role.
message DeleteRoleRequest {
  string code = 1;
}
